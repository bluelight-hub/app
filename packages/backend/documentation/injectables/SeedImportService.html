<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>@bluelight-hub/backend documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
    </head>
    <body>
          <script>
               // Blocking script to avoid flickering dark mode
               // Dark mode toggle button
               var useDark = window.matchMedia('(prefers-color-scheme: dark)');
               var darkModeState = useDark.matches;
               var $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               var $darkModeToggles = document.querySelectorAll('.dark-mode-switch');
               var darkModeStateLocal = localStorage.getItem('compodoc_darkmode-state');

               function checkToggle(check) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].checked = check;
                    }
               }

               function toggleDarkMode(state) {
                    if (window.localStorage) {
                         localStorage.setItem('compodoc_darkmode-state', state);
                    }

                    checkToggle(state);

                    const hasClass = document.body.classList.contains('dark');

                    if (state) {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.add('dark');
                         }
                         if (!hasClass) {
                              document.body.classList.add('dark');
                         }
                    } else {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.remove('dark');
                         }
                         if (hasClass) {
                              document.body.classList.remove('dark');
                         }
                    }
               }

               useDark.addEventListener('change', function (evt) {
                    toggleDarkMode(evt.matches);
               });
               if (darkModeStateLocal) {
                    darkModeState = darkModeStateLocal === 'true';
               }
               toggleDarkMode(darkModeState);
          </script>

        <div class="navbar navbar-default navbar-fixed-top d-md-none p-0">
               <div class="d-flex">
                    <a href="../" class="navbar-brand">@bluelight-hub/backend documentation</a>
                    <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
               </div>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="d-none d-md-block menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content injectable">
                   <div class="content-data">








<ol class="breadcrumb">
  <li class="breadcrumb-item">Injectables</li>
  <li class="breadcrumb-item" >SeedImportService</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="nav-item">
            <a href="#info" 
                class="nav-link"
                class="nav-link active"
                role="tab" id="info-tab" data-bs-toggle="tab" data-link="info">Info</a>
        </li>
        <li class="nav-item">
            <a href="#source" 
                class="nav-link"
                
                role="tab" id="source-tab" data-bs-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/modules/seed/seed-import.service.ts</code>
        </p>


            <p class="comment">
                <h3>Description</h3>
            </p>
            <p class="comment">
                <p>Service für JSON-basierte Seed-Daten-Importe.</p>

            </p>



            <section data-compodoc="block-index">
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#logger" >logger</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#createErrorResult" >createErrorResult</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Async</span>
                                <a href="#createOrUpdateEinsatz" >createOrUpdateEinsatz</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Async</span>
                                <a href="#executeImportTransaction" >executeImportTransaction</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Async</span>
                                <a href="#executePostImportCleanup" >executePostImportCleanup</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Async</span>
                                <a href="#executePreImportSetup" >executePreImportSetup</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Async</span>
                                <a href="#getNextLaufendeNummer" >getNextLaufendeNummer</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#getTotalEinsaetzeCount" >getTotalEinsaetzeCount</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Async</span>
                                <a href="#importEtbEntries" >importEtbEntries</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#importFromFile" >importFromFile</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Async</span>
                                <a href="#importSingleEinsatz" >importSingleEinsatz</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Async</span>
                                <a href="#importSingleEtbEntry" >importSingleEtbEntry</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Async</span>
                                <a href="#importValidatedData" >importValidatedData</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#normalizeToEinsaetzeArray" >normalizeToEinsaetzeArray</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Async</span>
                                <a href="#simulateImport" >simulateImport</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#validateFile" >validateFile</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

            <section data-compodoc="block-constructor">
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor(prisma: <a href="../injectables/PrismaService.html" target="_self">PrismaService</a>, errorHandlingService: <a href="../injectables/ErrorHandlingService.html" target="_self">ErrorHandlingService</a>)</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="27" class="link-to-prism">src/modules/seed/seed-import.service.ts:27</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                            <div>
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>prisma</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/PrismaService.html" target="_self" >PrismaService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>errorHandlingService</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/ErrorHandlingService.html" target="_self" >ErrorHandlingService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>

            <section data-compodoc="block-methods">
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="createErrorResult"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>createErrorResult</b></span>
                        <a href="#createErrorResult"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>createErrorResult(errors: string[], warnings: string[], startTime: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="503"
                                    class="link-to-prism">src/modules/seed/seed-import.service.ts:503</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>errors</td>
                                            <td>
                                                        <code>string[]</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>warnings</td>
                                            <td>
                                                        <code>string[]</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>startTime</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../interfaces/ImportResult.html" target="_self" >ImportResult</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="createOrUpdateEinsatz"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Async</span>
                        <span ><b>createOrUpdateEinsatz</b></span>
                        <a href="#createOrUpdateEinsatz"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>createOrUpdateEinsatz(einsatzData: <a href="../interfaces/SeedEinsatz.html" target="_self">SeedEinsatz</a>, config: <a href="../interfaces/ImportConfig.html" target="_self">ImportConfig</a>, tx: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="264"
                                    class="link-to-prism">src/modules/seed/seed-import.service.ts:264</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Erstellt oder aktualisiert einen Einsatz.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>einsatzData</td>
                                            <td>
                                                            <code><a href="../interfaces/SeedEinsatz.html" target="_self" >SeedEinsatz</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>config</td>
                                            <td>
                                                            <code><a href="../interfaces/ImportConfig.html" target="_self" >ImportConfig</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>tx</td>
                                            <td>
                                                            <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>unknown</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="executeImportTransaction"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Async</span>
                        <span ><b>executeImportTransaction</b></span>
                        <a href="#executeImportTransaction"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>executeImportTransaction(data: SeedData | SimpleSeedData, config: <a href="../interfaces/ImportConfig.html" target="_self">ImportConfig</a>, result: <a href="../interfaces/ImportResult.html" target="_self">ImportResult</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="194"
                                    class="link-to-prism">src/modules/seed/seed-import.service.ts:194</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Führt den Import in einer Transaktion aus.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>data</td>
                                            <td>
                                                        <code>SeedData | SimpleSeedData</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>config</td>
                                            <td>
                                                            <code><a href="../interfaces/ImportConfig.html" target="_self" >ImportConfig</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>result</td>
                                            <td>
                                                            <code><a href="../interfaces/ImportResult.html" target="_self" >ImportResult</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="executePostImportCleanup"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Async</span>
                        <span ><b>executePostImportCleanup</b></span>
                        <a href="#executePostImportCleanup"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>executePostImportCleanup(data: SeedData | SimpleSeedData, config: <a href="../interfaces/ImportConfig.html" target="_self">ImportConfig</a>, result: <a href="../interfaces/ImportResult.html" target="_self">ImportResult</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="397"
                                    class="link-to-prism">src/modules/seed/seed-import.service.ts:397</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Führt Post-Import Cleanup aus.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>data</td>
                                            <td>
                                                        <code>SeedData | SimpleSeedData</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>config</td>
                                            <td>
                                                            <code><a href="../interfaces/ImportConfig.html" target="_self" >ImportConfig</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>result</td>
                                            <td>
                                                            <code><a href="../interfaces/ImportResult.html" target="_self" >ImportResult</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="executePreImportSetup"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Async</span>
                        <span ><b>executePreImportSetup</b></span>
                        <a href="#executePreImportSetup"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>executePreImportSetup(data: SeedData | SimpleSeedData, config: <a href="../interfaces/ImportConfig.html" target="_self">ImportConfig</a>, result: <a href="../interfaces/ImportResult.html" target="_self">ImportResult</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="156"
                                    class="link-to-prism">src/modules/seed/seed-import.service.ts:156</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Führt Pre-Import Setup aus.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>data</td>
                                            <td>
                                                        <code>SeedData | SimpleSeedData</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>config</td>
                                            <td>
                                                            <code><a href="../interfaces/ImportConfig.html" target="_self" >ImportConfig</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>result</td>
                                            <td>
                                                            <code><a href="../interfaces/ImportResult.html" target="_self" >ImportResult</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getNextLaufendeNummer"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Async</span>
                        <span ><b>getNextLaufendeNummer</b></span>
                        <a href="#getNextLaufendeNummer"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getNextLaufendeNummer(einsatzId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, tx: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="494"
                                    class="link-to-prism">src/modules/seed/seed-import.service.ts:494</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>einsatzId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>tx</td>
                                            <td>
                                                            <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;number&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getTotalEinsaetzeCount"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>getTotalEinsaetzeCount</b></span>
                        <a href="#getTotalEinsaetzeCount"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getTotalEinsaetzeCount(_data: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="490"
                                    class="link-to-prism">src/modules/seed/seed-import.service.ts:490</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>_data</td>
                                            <td>
                                                            <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="importEtbEntries"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Async</span>
                        <span ><b>importEtbEntries</b></span>
                        <a href="#importEtbEntries"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>importEtbEntries(einsatzId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, etbEntries: <a href="../interfaces/SeedEtbEntry.html" target="_self">SeedEtbEntry[]</a>, config: <a href="../interfaces/ImportConfig.html" target="_self">ImportConfig</a>, result: <a href="../interfaces/ImportResult.html" target="_self">ImportResult</a>, tx: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="300"
                                    class="link-to-prism">src/modules/seed/seed-import.service.ts:300</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Importiert ETB-Einträge für einen Einsatz.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>einsatzId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>etbEntries</td>
                                            <td>
                                                            <code><a href="../interfaces/SeedEtbEntry.html" target="_self" >SeedEtbEntry[]</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>config</td>
                                            <td>
                                                            <code><a href="../interfaces/ImportConfig.html" target="_self" >ImportConfig</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>result</td>
                                            <td>
                                                            <code><a href="../interfaces/ImportResult.html" target="_self" >ImportResult</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>tx</td>
                                            <td>
                                                            <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="importFromFile"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>importFromFile</b></span>
                        <a href="#importFromFile"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>importFromFile(filePath: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, config: <a href="../interfaces/ImportConfig.html" target="_self">ImportConfig</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="41"
                                    class="link-to-prism">src/modules/seed/seed-import.service.ts:41</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Importiert Seed-Daten aus einer JSON-Datei.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Default value</td>
                                                <td>Description</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>filePath</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>

                                            <td>
                                            </td>

                                            <td>
                                                    <p>Pfad zur JSON-Datei</p>

                                            </td>
                                        </tr>
                                        <tr>
                                                <td>config</td>
                                            <td>
                                                            <code><a href="../interfaces/ImportConfig.html" target="_self" >ImportConfig</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>

                                            <td>
                                                    <code>{}</code>
                                            </td>

                                            <td>
                                                    <p>Import-Konfiguration</p>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../interfaces/ImportResult.html" target="_self" >Promise&lt;ImportResult&gt;</a></code>

                        </div>
                            <div class="io-description">
                                <p>Import-Ergebnis mit Details</p>

                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="importSingleEinsatz"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Async</span>
                        <span ><b>importSingleEinsatz</b></span>
                        <a href="#importSingleEinsatz"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>importSingleEinsatz(einsatzData: <a href="../interfaces/SeedEinsatz.html" target="_self">SeedEinsatz</a>, config: <a href="../interfaces/ImportConfig.html" target="_self">ImportConfig</a>, result: <a href="../interfaces/ImportResult.html" target="_self">ImportResult</a>, tx: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="231"
                                    class="link-to-prism">src/modules/seed/seed-import.service.ts:231</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Importiert einen einzelnen Einsatz mit allen zugehörigen Daten.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>einsatzData</td>
                                            <td>
                                                            <code><a href="../interfaces/SeedEinsatz.html" target="_self" >SeedEinsatz</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>config</td>
                                            <td>
                                                            <code><a href="../interfaces/ImportConfig.html" target="_self" >ImportConfig</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>result</td>
                                            <td>
                                                            <code><a href="../interfaces/ImportResult.html" target="_self" >ImportResult</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>tx</td>
                                            <td>
                                                            <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="importSingleEtbEntry"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Async</span>
                        <span ><b>importSingleEtbEntry</b></span>
                        <a href="#importSingleEtbEntry"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>importSingleEtbEntry(einsatzId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, entryData: <a href="../interfaces/SeedEtbEntry.html" target="_self">SeedEtbEntry</a>, laufendeNummer: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, config: <a href="../interfaces/ImportConfig.html" target="_self">ImportConfig</a>, result: <a href="../interfaces/ImportResult.html" target="_self">ImportResult</a>, tx: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="323"
                                    class="link-to-prism">src/modules/seed/seed-import.service.ts:323</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Importiert einen einzelnen ETB-Eintrag.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>einsatzId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>entryData</td>
                                            <td>
                                                            <code><a href="../interfaces/SeedEtbEntry.html" target="_self" >SeedEtbEntry</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>laufendeNummer</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>config</td>
                                            <td>
                                                            <code><a href="../interfaces/ImportConfig.html" target="_self" >ImportConfig</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>result</td>
                                            <td>
                                                            <code><a href="../interfaces/ImportResult.html" target="_self" >ImportResult</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>tx</td>
                                            <td>
                                                            <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="importValidatedData"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Async</span>
                        <span ><b>importValidatedData</b></span>
                        <a href="#importValidatedData"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>importValidatedData(data: SeedData | SimpleSeedData, config: <a href="../interfaces/ImportConfig.html" target="_self">ImportConfig</a>, startTime: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="104"
                                    class="link-to-prism">src/modules/seed/seed-import.service.ts:104</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Importiert bereits validierte Seed-Daten.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Description</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>data</td>
                                            <td>
                                                        <code>SeedData | SimpleSeedData</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <p>Validierte Seed-Daten</p>

                                            </td>
                                        </tr>
                                        <tr>
                                                <td>config</td>
                                            <td>
                                                            <code><a href="../interfaces/ImportConfig.html" target="_self" >ImportConfig</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <p>Import-Konfiguration</p>

                                            </td>
                                        </tr>
                                        <tr>
                                                <td>startTime</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <p>Start-Zeitstempel</p>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../interfaces/ImportResult.html" target="_self" >Promise&lt;ImportResult&gt;</a></code>

                        </div>
                            <div class="io-description">
                                <p>Import-Ergebnis</p>

                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="normalizeToEinsaetzeArray"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>normalizeToEinsaetzeArray</b></span>
                        <a href="#normalizeToEinsaetzeArray"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>normalizeToEinsaetzeArray(data: SeedData | SimpleSeedData)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="465"
                                    class="link-to-prism">src/modules/seed/seed-import.service.ts:465</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Hilfsmethoden</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>data</td>
                                            <td>
                                                        <code>SeedData | SimpleSeedData</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../interfaces/SeedEinsatz.html" target="_self" >SeedEinsatz[]</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="simulateImport"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Async</span>
                        <span ><b>simulateImport</b></span>
                        <a href="#simulateImport"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>simulateImport(data: SeedData | SimpleSeedData, config: <a href="../interfaces/ImportConfig.html" target="_self">ImportConfig</a>, result: <a href="../interfaces/ImportResult.html" target="_self">ImportResult</a>, startTime: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="431"
                                    class="link-to-prism">src/modules/seed/seed-import.service.ts:431</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Simuliert einen Import im Dry-Run-Modus.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>data</td>
                                            <td>
                                                        <code>SeedData | SimpleSeedData</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>config</td>
                                            <td>
                                                            <code><a href="../interfaces/ImportConfig.html" target="_self" >ImportConfig</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>result</td>
                                            <td>
                                                            <code><a href="../interfaces/ImportResult.html" target="_self" >ImportResult</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>startTime</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../interfaces/ImportResult.html" target="_self" >Promise&lt;ImportResult&gt;</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="validateFile"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>validateFile</b></span>
                        <a href="#validateFile"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>validateFile(filePath: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, config: <a href="../interfaces/ImportConfig.html" target="_self">ImportConfig</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="71"
                                    class="link-to-prism">src/modules/seed/seed-import.service.ts:71</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Validiert eine JSON-Datei ohne Import.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Default value</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>filePath</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>

                                            <td>
                                            </td>

                                        </tr>
                                        <tr>
                                                <td>config</td>
                                            <td>
                                                            <code><a href="../interfaces/ImportConfig.html" target="_self" >ImportConfig</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>

                                            <td>
                                                    <code>{}</code>
                                            </td>

                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../interfaces/ValidationResult.html" target="_self" >Promise&lt;ValidationResult&gt;</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>
            <section data-compodoc="block-properties">
    
    <h3 id="inputs">
        Properties
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="logger"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Readonly</span>
                        <span ><b>logger</b></span>
                        <a href="#logger"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>new Logger(SeedImportService.name)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="27" class="link-to-prism">src/modules/seed/seed-import.service.ts:27</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
</section>

    </div>


    <div class="tab-pane fade  tab-source-code" id="source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { ErrorHandlingService } from &#x27;@/common/services/error-handling.service&#x27;;
import { RetryConfig } from &#x27;@/common/utils/retry.util&#x27;;
import { PrismaService } from &#x27;@/prisma/prisma.service&#x27;;
import { Injectable, Logger } from &#x27;@nestjs/common&#x27;;
import { promises as fs } from &#x27;fs&#x27;;
import {
  EtbEntryStatus,
  ImportConfig,
  ImportResult,
  SeedData,
  SeedEinsatz,
  SeedEtbEntry,
  SimpleSeedData,
} from &#x27;./schema&#x27;;
import { validateSeedDataString, ValidationResult } from &#x27;./schema-validator&#x27;;

/**
 * Service für JSON-basierte Seed-Daten-Importe.
 */
@Injectable()
export class SeedImportService {
  private readonly logger &#x3D; new Logger(SeedImportService.name);

  constructor(
    private readonly prisma: PrismaService,
    private readonly errorHandlingService: ErrorHandlingService,
  ) {}

  /**
   * Importiert Seed-Daten aus einer JSON-Datei.
   *
   * @param filePath Pfad zur JSON-Datei
   * @param config Import-Konfiguration
   * @returns Import-Ergebnis mit Details
   */
  async importFromFile(filePath: string, config: ImportConfig &#x3D; {}): Promise&lt;ImportResult&gt; {
    const startTime &#x3D; Date.now();
    this.logger.log(&#x60;Starte JSON-Import aus Datei: ${filePath}&#x60;);

    try {
      // 1. Datei lesen und validieren
      const jsonContent &#x3D; await fs.readFile(filePath, &#x27;utf8&#x27;);
      const validation &#x3D; validateSeedDataString(jsonContent, config);

      if (!validation.valid) {
        return this.createErrorResult(
          validation.errors.map((e) &#x3D;&gt; e.message),
          validation.warnings.map((w) &#x3D;&gt; w.message),
          startTime,
        );
      }

      this.logger.log(&#x60;JSON-Datei erfolgreich validiert (Format: ${validation.detectedFormat})&#x60;);

      // 2. Import durchführen
      return await this.importValidatedData(validation.data!, config, startTime);
    } catch (error) {
      this.logger.error(&#x60;Fehler beim Lesen der Datei ${filePath}:&#x60;, error);
      return this.createErrorResult([&#x60;Datei-Fehler: ${error.message}&#x60;], [], startTime);
    }
  }

  /**
   * Validiert eine JSON-Datei ohne Import.
   */
  async validateFile(filePath: string, config: ImportConfig &#x3D; {}): Promise&lt;ValidationResult&gt; {
    try {
      const jsonContent &#x3D; await fs.readFile(filePath, &#x27;utf8&#x27;);
      return validateSeedDataString(jsonContent, config);
    } catch (error) {
      return {
        valid: false,
        errors: [
          {
            code: &#x27;FILE_READ_ERROR&#x27;,
            message: &#x60;Datei konnte nicht gelesen werden: ${error.message}&#x60;,
            severity: &#x27;error&#x27;,
          },
        ],
        warnings: [],
        detectedFormat: &#x27;unknown&#x27;,
        metadata: {
          einsaetzeCount: 0,
          etbEntriesCount: 0,
          estimatedSizeBytes: 0,
        },
      };
    }
  }

  /**
   * Importiert bereits validierte Seed-Daten.
   *
   * @param data Validierte Seed-Daten
   * @param config Import-Konfiguration
   * @param startTime Start-Zeitstempel
   * @returns Import-Ergebnis
   */
  private async importValidatedData(
    data: SeedData | SimpleSeedData,
    config: ImportConfig,
    startTime: number,
  ): Promise&lt;ImportResult&gt; {
    const result: ImportResult &#x3D; {
      success: false,
      einsaetzeCreated: 0,
      etbEntriesCreated: 0,
      attachmentsCreated: 0,
      durationMs: 0,
      warnings: [],
      errors: [],
      createdEntities: {
        einsaetze: [],
        etbEntries: [],
      },
    };

    try {
      // Pre-Import Setup
      await this.executePreImportSetup(data, config, result);

      if (config.dryRun) {
        this.logger.log(&#x27;Dry-Run-Modus: Simuliere Import ohne Datenbank-Änderungen&#x27;);
        return this.simulateImport(data, config, result, startTime);
      }

      // Echter Import mit Transaktion
      await this.executeImportTransaction(data, config, result);

      // Post-Import Cleanup
      await this.executePostImportCleanup(data, config, result);

      result.success &#x3D; true;
      result.durationMs &#x3D; Date.now() - startTime;

      this.logger.log(
        &#x60;Import erfolgreich abgeschlossen: ${result.einsaetzeCreated} Einsätze, ${result.etbEntriesCreated} ETB-Einträge&#x60;,
      );
    } catch (error) {
      this.logger.error(&#x27;Import-Fehler:&#x27;, error);
      result.errors.push(&#x60;Import-Fehler: ${error.message}&#x60;);
      result.durationMs &#x3D; Date.now() - startTime;
    }

    return result;
  }

  /**
   * Führt Pre-Import Setup aus.
   */
  private async executePreImportSetup(
    data: SeedData | SimpleSeedData,
    config: ImportConfig,
    result: ImportResult,
  ): Promise&lt;void&gt; {
    // Prüfe ob es sich um vollständige Daten handelt
    if (&#x27;preImportSetup&#x27; in data &amp;&amp; data.preImportSetup) {
      const setup &#x3D; data.preImportSetup;

      // Warnungen anzeigen
      if (setup.warnings) {
        result.warnings.push(...setup.warnings);
        setup.warnings.forEach((warning) &#x3D;&gt; {
          this.logger.warn(&#x60;Pre-Import Warnung: ${warning}&#x60;);
        });
      }

      // SQL-Befehle ausführen (nur wenn nicht Dry-Run)
      if (setup.sqlCommands &amp;&amp; !config.dryRun) {
        for (const sqlCommand of setup.sqlCommands) {
          this.logger.log(&#x60;Führe Pre-Import SQL aus: ${sqlCommand.substring(0, 100)}...&#x60;);
          try {
            await this.prisma.$executeRawUnsafe(sqlCommand);
          } catch (error) {
            this.logger.error(&#x60;Pre-Import SQL-Fehler: ${error.message}&#x60;);
            if (config.strictWarnings) {
              throw new Error(&#x60;Pre-Import Setup fehlgeschlagen: ${error.message}&#x60;);
            }
            result.warnings.push(&#x60;Pre-Import SQL-Warnung: ${error.message}&#x60;);
          }
        }
      }
    }
  }

  /**
   * Führt den Import in einer Transaktion aus.
   */
  private async executeImportTransaction(
    data: SeedData | SimpleSeedData,
    config: ImportConfig,
    result: ImportResult,
  ): Promise&lt;void&gt; {
    const retryConfig: Partial&lt;RetryConfig&gt; &#x3D; {
      maxRetries: 3,
      baseDelay: 1000,
      maxDelay: 10000,
      jitterFactor: 0.2,
    };

    await this.errorHandlingService.executeWithErrorHandling(
      async () &#x3D;&gt; {
        return await this.prisma.$transaction(
          async (tx) &#x3D;&gt; {
            const einsaetze &#x3D; this.normalizeToEinsaetzeArray(data);

            for (const einsatzData of einsaetze) {
              await this.importSingleEinsatz(einsatzData, config, result, tx);
            }
          },
          {
            timeout: 60000, // 60 Sekunden Timeout für große Imports
            isolationLevel: &#x27;Serializable&#x27;,
          },
        );
      },
      &#x27;seed-import-transaction&#x27;,
      { dataSize: JSON.stringify(data).length },
      retryConfig,
    );
  }

  /**
   * Importiert einen einzelnen Einsatz mit allen zugehörigen Daten.
   */
  private async importSingleEinsatz(
    einsatzData: SeedEinsatz,
    config: ImportConfig,
    result: ImportResult,
    tx: any,
  ): Promise&lt;void&gt; {
    this.logger.log(&#x60;Importiere Einsatz: ${einsatzData.name}&#x60;);

    // Einsatz erstellen oder aktualisieren
    const einsatz &#x3D; await this.createOrUpdateEinsatz(einsatzData, config, tx);

    result.einsaetzeCreated++;
    result.createdEntities.einsaetze.push({
      id: einsatz.id,
      name: einsatz.name,
    });

    if (config.progressCallback) {
      config.progressCallback(
        &#x60;Einsatz &quot;${einsatz.name}&quot; erstellt&#x60;,
        (result.einsaetzeCreated / this.getTotalEinsaetzeCount(einsatzData)) * 100,
      );
    }

    // ETB-Einträge importieren
    if (einsatzData.etbEntries &amp;&amp; einsatzData.etbEntries.length &gt; 0) {
      await this.importEtbEntries(einsatz.id, einsatzData.etbEntries, config, result, tx);
    }
  }

  /**
   * Erstellt oder aktualisiert einen Einsatz.
   */
  private async createOrUpdateEinsatz(einsatzData: SeedEinsatz, config: ImportConfig, tx: any) {
    // Prüfen ob Einsatz bereits existiert
    const existingEinsatz &#x3D; await tx.einsatz.findFirst({
      where: { name: einsatzData.name },
    });

    if (existingEinsatz &amp;&amp; !config.overwriteConflicts) {
      this.logger.log(&#x60;Einsatz &quot;${einsatzData.name}&quot; existiert bereits, verwende existierenden&#x60;);
      return existingEinsatz;
    }

    if (existingEinsatz &amp;&amp; config.overwriteConflicts) {
      this.logger.log(&#x60;Einsatz &quot;${einsatzData.name}&quot; wird aktualisiert&#x60;);
      return await tx.einsatz.update({
        where: { id: existingEinsatz.id },
        data: {
          name: einsatzData.name,
          beschreibung: einsatzData.beschreibung,
          updatedAt: new Date(),
        },
      });
    }

    // Neuen Einsatz erstellen
    this.logger.log(&#x60;Erstelle neuen Einsatz: ${einsatzData.name}&#x60;);
    return await tx.einsatz.create({
      data: {
        name: einsatzData.name,
        beschreibung: einsatzData.beschreibung,
      },
    });
  }

  /**
   * Importiert ETB-Einträge für einen Einsatz.
   */
  private async importEtbEntries(
    einsatzId: string,
    etbEntries: SeedEtbEntry[],
    config: ImportConfig,
    result: ImportResult,
    tx: any,
  ): Promise&lt;void&gt; {
    // ETB-Einträge nach laufender Nummer sortieren
    const sortedEntries &#x3D; [...etbEntries].sort(
      (a, b) &#x3D;&gt; (a.laufendeNummer || 0) - (b.laufendeNummer || 0),
    );

    let nextLaufendeNummer &#x3D; await this.getNextLaufendeNummer(einsatzId, tx);

    for (const entryData of sortedEntries) {
      await this.importSingleEtbEntry(einsatzId, entryData, nextLaufendeNummer, config, result, tx);
      nextLaufendeNummer++;
    }
  }

  /**
   * Importiert einen einzelnen ETB-Eintrag.
   */
  private async importSingleEtbEntry(
    einsatzId: string,
    entryData: SeedEtbEntry,
    laufendeNummer: number,
    config: ImportConfig,
    result: ImportResult,
    tx: any,
  ): Promise&lt;void&gt; {
    const now &#x3D; new Date();

    // Zeitstempel verarbeiten
    const timestampErstellung &#x3D; entryData.timestampErstellung
      ? new Date(entryData.timestampErstellung)
      : config.autoTimestamps
        ? now
        : new Date();

    const timestampEreignis &#x3D; entryData.timestampEreignis
      ? new Date(entryData.timestampEreignis)
      : config.autoTimestamps
        ? now
        : new Date();

    // ETB-Eintrag erstellen
    const etbEntry &#x3D; await tx.etbEntry.create({
      data: {
        laufendeNummer: entryData.laufendeNummer || laufendeNummer,
        timestampErstellung,
        timestampEreignis,
        autorId: entryData.autorId,
        autorName: entryData.autorName,
        autorRolle: entryData.autorRolle,
        kategorie: entryData.kategorie,
        inhalt: entryData.inhalt,
        referenzEinsatzId: einsatzId,
        referenzPatientId: entryData.referenzPatientId,
        referenzEinsatzmittelId: entryData.referenzEinsatzmittelId,
        systemQuelle: entryData.systemQuelle,
        version: entryData.version || 1,
        status: entryData.status || EtbEntryStatus.AKTIV,
        sender: entryData.sender,
        receiver: entryData.receiver,
      },
    });

    result.etbEntriesCreated++;
    result.createdEntities.etbEntries.push({
      id: etbEntry.id,
      laufendeNummer: etbEntry.laufendeNummer,
      einsatzId: einsatzId,
    });

    this.logger.debug(&#x60;ETB-Eintrag ${etbEntry.laufendeNummer} für Einsatz ${einsatzId} erstellt&#x60;);

    // Anhänge importieren
    if (entryData.anlagen &amp;&amp; entryData.anlagen.length &gt; 0) {
      for (const anhang of entryData.anlagen) {
        await tx.etbAttachment.create({
          data: {
            etbEntryId: etbEntry.id,
            dateiname: anhang.dateiname,
            dateityp: anhang.dateityp,
            speicherOrt: anhang.speicherOrt,
            beschreibung: anhang.beschreibung,
          },
        });
        result.attachmentsCreated++;
      }
    }
  }

  /**
   * Führt Post-Import Cleanup aus.
   */
  private async executePostImportCleanup(
    data: SeedData | SimpleSeedData,
    config: ImportConfig,
    result: ImportResult,
  ): Promise&lt;void&gt; {
    if (&#x27;postImportCleanup&#x27; in data &amp;&amp; data.postImportCleanup) {
      const cleanup &#x3D; data.postImportCleanup;

      // SQL-Befehle ausführen
      if (cleanup.sqlCommands) {
        for (const sqlCommand of cleanup.sqlCommands) {
          this.logger.log(&#x60;Führe Post-Import SQL aus: ${sqlCommand.substring(0, 100)}...&#x60;);
          try {
            await this.prisma.$executeRawUnsafe(sqlCommand);
          } catch (error) {
            this.logger.error(&#x60;Post-Import SQL-Fehler: ${error.message}&#x60;);
            result.warnings.push(&#x60;Post-Import SQL-Warnung: ${error.message}&#x60;);
          }
        }
      }

      // Validierungsschritte ausführen
      if (cleanup.validationSteps) {
        for (const step of cleanup.validationSteps) {
          this.logger.log(&#x60;Validierungsschritt: ${step}&#x60;);
          // Hier könnten spezifische Validierungen implementiert werden
        }
      }
    }
  }

  /**
   * Simuliert einen Import im Dry-Run-Modus.
   */
  private async simulateImport(
    data: SeedData | SimpleSeedData,
    config: ImportConfig,
    result: ImportResult,
    startTime: number,
  ): Promise&lt;ImportResult&gt; {
    const einsaetze &#x3D; this.normalizeToEinsaetzeArray(data);

    result.einsaetzeCreated &#x3D; einsaetze.length;
    result.etbEntriesCreated &#x3D; einsaetze.reduce(
      (sum, einsatz) &#x3D;&gt; sum + (einsatz.etbEntries?.length || 0),
      0,
    );
    result.attachmentsCreated &#x3D; einsaetze.reduce(
      (sum, einsatz) &#x3D;&gt;
        sum +
        (einsatz.etbEntries?.reduce(
          (attachSum, entry) &#x3D;&gt; attachSum + (entry.anlagen?.length || 0),
          0,
        ) || 0),
      0,
    );

    result.success &#x3D; true;
    result.durationMs &#x3D; Date.now() - startTime;
    result.warnings.push(&#x27;Dry-Run durchgeführt - keine Datenbank-Änderungen&#x27;);

    return result;
  }

  /**
   * Hilfsmethoden
   */

  private normalizeToEinsaetzeArray(data: SeedData | SimpleSeedData): SeedEinsatz[] {
    if (&#x27;einsaetze&#x27; in data) {
      return data.einsaetze;
    } else {
      // Vereinfachtes Format zu vollständigem Format konvertieren
      const seedEinsatz: SeedEinsatz &#x3D; {
        name: data.einsatz.name,
        beschreibung: data.einsatz.beschreibung,
      };

      if (data.initialEtbEntries) {
        seedEinsatz.etbEntries &#x3D; data.initialEtbEntries.map((entry, index) &#x3D;&gt; ({
          laufendeNummer: index + 1,
          autorId: entry.autorId,
          autorName: entry.autorName,
          kategorie: entry.kategorie,
          inhalt: entry.inhalt,
          timestampEreignis: entry.timestampEreignis,
        }));
      }

      return [seedEinsatz];
    }
  }

  private getTotalEinsaetzeCount(_data: any): number {
    return 1; // Da wir pro Einsatz aufrufen
  }

  private async getNextLaufendeNummer(einsatzId: string, tx: any): Promise&lt;number&gt; {
    const lastEntry &#x3D; await tx.etbEntry.findFirst({
      where: { referenzEinsatzId: einsatzId },
      orderBy: { laufendeNummer: &#x27;desc&#x27; },
    });

    return (lastEntry?.laufendeNummer || 0) + 1;
  }

  private createErrorResult(errors: string[], warnings: string[], startTime: number): ImportResult {
    return {
      success: false,
      einsaetzeCreated: 0,
      etbEntriesCreated: 0,
      attachmentsCreated: 0,
      durationMs: Date.now() - startTime,
      warnings,
      errors,
      createdEntities: {
        einsaetze: [],
        etbEntries: [],
      },
    };
  }
}
</code></pre>
    </div>

</div>













                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'injectable';
            var COMPODOC_CURRENT_PAGE_URL = 'SeedImportService.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script>
               $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               checkToggle(darkModeState);
               if ($darkModeToggleSwitchers.length > 0) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].addEventListener('change', function (event) {
                              darkModeState = !darkModeState;
                              toggleDarkMode(darkModeState);
                         });
                    }
               }
          </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
